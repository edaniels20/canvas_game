export class Maps {
    constructor(ctx, tileSize) {
        // Home Map
        this.homeMap = {
            cols: 25,
            rows: 25,
            tsize: tileSize,
            tiles: [
            2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,2,1,1,1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,2,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,2,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,2,0,0,0,0,2,0,0,0,0,2,1,1,1,1,1,2,0,0,0,0,2,
            2,0,0,1,1,0,1,1,1,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,1,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
            1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
        ],
        getTile: function(col, row) {
            return this.tiles[row * this.cols + col]
        }};
        this.ctx = ctx;
        this.tiles = [
            '../assets/grass.png',
            '../assets/red-wall-bottom.png',
            '../assets/red-wall-center.png',
        ]
        this.output = document.getElementById('output');
    }

    drawMap(map) {
        let loadedTiles = [];
        let locationX = 0;
        let locationY = 0;
        this.tiles.forEach(el => {
            let image = new Image(map.tsize, map.tsize);
            image.src = el;
            loadedTiles.push(image);
        });
        loadedTiles[2].onload = () => {
            let firstRun = true;
            for(let i = 0; i < map.tiles.length; i++) {
                if(i % map.cols == 0 && !firstRun) {
                    locationX = 0;
                    locationY += map.tsize;
                }
                this.ctx.drawImage(loadedTiles[map.tiles[i]], locationX, locationY, map.tsize, map.tsize);
                locationX += map.tsize;
                firstRun = false;
            }
        }
    }
}